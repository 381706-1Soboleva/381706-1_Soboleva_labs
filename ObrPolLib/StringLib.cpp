#include "StringLib.h"
#include <cstdlib>

TString::TString()
{
  s = 0;
  len = 0;
}
//-------------------------------------------------------------------------------------------------
TString::TString(TString &A)
{
  len = A.len;
  if (len != 0)
  {
    s = new char[len];
    for (int i = 0; i < len; i++)
      s[i] = A.s[i];
  }
  else
    s = 0;
}
//-------------------------------------------------------------------------------------------------
TString::TString(char* a)
{
  if (a == 0)
    throw 1;
  if (a[0] == '\0')
    return;
  char x = 1;
  int size = 0;
  while (x != '\0')
  {
    size++;
    x = a[size];
  }

  len = size + 1;
  s = new char[len];
  for (int i = 0; i < len - 1; i++)
    s[i] = a[i];
  s[len - 1] = 0;
}
//-------------------------------------------------------------------------------------------------
TString::~TString()
{
  if (s != 0)
    delete[] s;
}
//-------------------------------------------------------------------------------------------------
int TString::GetLen()
{
  return len;
}
//-------------------------------------------------------------------------------------------------
void TString::DeleteS()
{
  if (s != 0)
    delete[] s;
}
//-------------------------------------------------------------------------------------------------
char& TString::operator[](int i)
{
  if ((i >= 0) && (i < len))
    return s[i];
  throw 1;
}
//-------------------------------------------------------------------------------------------------
std::istream& operator>>(std::istream &A, TString &B)
{
  char s[256] = { 0 };
  A >> s;

  char x = 1;
  int size = 0;
  while (x != '\0')
  {
    size++;
    x = s[size];
  }

  B.len = size + 1;
  B.s = new char[B.len];
  for (int i = 0; i < B.len - 1; i++)
    B.s[i] = s[i];
  B.s[B.len - 1] = 0;
  return A;
}
//-------------------------------------------------------------------------------------------------
std::ostream& operator<<(std::ostream &A, const TString &B)
{
  A << B.s;
  return A;
}
//-------------------------------------------------------------------------------------------------
